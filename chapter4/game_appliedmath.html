<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Turn-Based Battle Game</title>

</head>

<style>
/* Base Game Container Styles */
.game-container {
    max-width: 800px;
    margin: 0 auto;
    padding: 20px;
    background: linear-gradient(145deg, #1a1a1a, #2a2a2a);
    border-radius: 15px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    color: #ffffff;
}

/* Game Title */
.game-container h1 {
    font-size: 2.5em;
    text-align: center;
    color: #4CAF50;
    margin-bottom: 30px;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
}

/* Progress Bar */
.progress-bar {
    display: flex;
    justify-content: space-between;
    margin: 30px 0;
    padding: 15px;
    background: rgba(51, 51, 51, 0.8);
    border-radius: 12px;
    box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.2);
}

.progress-step {
    flex: 1;
    text-align: center;
    padding: 12px;
    margin: 0 8px;
    background: rgba(68, 68, 68, 0.8);
    border-radius: 8px;
    opacity: 0.7;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    cursor: default;
    font-weight: 600;
}

.progress-step.active {
    background: linear-gradient(145deg, #4CAF50, #45a049);
    opacity: 1;
    transform: scale(1.05);
    box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
}

.progress-step.completed {
    background: linear-gradient(145deg, #45a049, #388E3C);
    opacity: 1;
    position: relative;
}

.progress-step.completed::after {
    content: '‚úì';
    position: absolute;
    right: 10px;
    top: 50%;
    transform: translateY(-50%);
    color: #fff;
    font-weight: bold;
}

/* Level Styles */
.level {
    display: none;
    opacity: 0;
    transform: translateY(20px);
    transition: all 0.5s ease-out;
}

.level.active {
    display: block;
    opacity: 1;
    transform: translateY(0);
}

.level h2 {
    color: #4CAF50;
    margin: 30px 0;
    text-align: center;
    font-size: 1.8em;
    text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.2);
}

/* Sub Puzzles Grid */
.sub-puzzles {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
    margin-bottom: 30px;
}

.sub-puzzle {
    position: relative;
    background: rgba(64, 64, 64, 0.8);
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    transition: transform 0.3s ease;
}

.sub-puzzle:hover {
    transform: translateY(-5px);
}

.sub-puzzle h3 {
    color: #4CAF50;
    margin-bottom: 15px;
    font-size: 1.3em;
}

/* Puzzle Elements */
.puzzle-text {
    font-size: 1.5em;
    margin: 20px 0;
    text-align: center;
    color: #fff;
    letter-spacing: 1px;
}

.puzzle-input {
    width: calc(100% - 24px); /* Adjust input width to account for padding */
    padding: 12px;
    border: 2px solid rgba(76, 175, 80, 0.3);
    background: rgba(255, 255, 255, 0.1);
    border-radius: 8px;
    color: #fff;
    font-size: 1.1em;
    margin-bottom: 15px;
    transition: all 0.3s ease;
    box-sizing: border-box; /* Ensures padding is included in width calculation */
}

.puzzle-input:focus {
    outline: none;
    border-color: #4CAF50;
    box-shadow: 0 0 10px rgba(76, 175, 80, 0.3);
}

/* Button Styles */
.submit-btn {
    width: 100%;
    padding: 12px 24px;
    background: linear-gradient(145deg, #4CAF50, #45a049);
    border: none;
    border-radius: 8px;
    color: white;
    font-size: 1em;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 1px;
    cursor: pointer;
    transition: all 0.3s ease;
}

.submit-btn:hover {
    background: linear-gradient(145deg, #45a049, #388E3C);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(76, 175, 80, 0.4);
}

.submit-btn:active {
    transform: translateY(0);
}

/* Main Puzzle Styles */
.main-puzzle {
    display: none;
    background: linear-gradient(145deg, #404040, #363636);
    padding: 25px;
    border-radius: 12px;
    margin-top: 30px;
    animation: fadeIn 0.6s ease-out;
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
}

/* Animations */
@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(-20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Success/Error States */
.sub-puzzle.solved {
    background: linear-gradient(145deg, #1b5e20, #2e7d32);
    transform: scale(1.02);
}

.error {
    animation: shake 0.5s cubic-bezier(0.36, 0.07, 0.19, 0.97) both;
}

@keyframes shake {
    10%, 90% { transform: translateX(-1px); }
    20%, 80% { transform: translateX(2px); }
    30%, 50%, 70% { transform: translateX(-4px); }
    40%, 60% { transform: translateX(4px); }
}

/* Discovered Info Section */
.discovered-info {
    margin-top: 30px;
    padding: 20px;
    background: rgba(51, 51, 51, 0.8);
    border-radius: 12px;
    box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.2);
}

.discovered-info h3 {
    color: #4CAF50;
    margin-bottom: 15px;
}

#infoList {
    list-style: none;
    padding: 0;
}

#infoList li {
    padding: 10px 15px;
    margin: 8px 0;
    background: rgba(76, 175, 80, 0.1);
    border-radius: 6px;
    transition: all 0.3s ease;
}

#infoList li:hover {
    background: rgba(76, 175, 80, 0.2);
    transform: translateX(5px);
}

/* Responsive Design */
@media (max-width: 768px) {
    .game-container {
        padding: 15px;
    }
    
    .sub-puzzles {
        grid-template-columns: 1fr;
    }
    
    .progress-step {
        font-size: 0.9em;
        padding: 8px;
    }
}
/* Add to existing CSS */
.progress-step.clickable {
    cursor: pointer;
}

.progress-step.special {
    background: linear-gradient(145deg, #2196F3, #1976D2);
}

.stats-section {
    background: rgba(64, 64, 64, 0.8);
    padding: 20px;
    border-radius: 12px;
    margin-bottom: 20px;
}

.chart-select {
    width: 100%;
    padding: 12px;
    margin-bottom: 20px;
    background: rgba(255, 255, 255, 0.9); /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏∂‡∏ö‡∏Ç‡∏≠‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á */
    border: 2px solid rgba(76, 175, 80, 0.3);
    border-radius: 8px;
    color: #000; /* ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏µ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡∏Ç‡∏≠‡∏á select ‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡∏î‡∏≥ */
    font-size: 1em;
}
.chart-select option {
    background: #ffffff;
    color: #000000;
    padding: 12px;
    font-size: 1em;
}

/* ‡∏õ‡∏£‡∏±‡∏ö‡∏™‡πÑ‡∏ï‡∏•‡πå‡πÄ‡∏°‡∏∑‡πà‡∏≠ hover ‡πÅ‡∏•‡∏∞ focus */
.chart-select:hover, 
.chart-select:focus {
    border-color: #4CAF50;
    outline: none;
    box-shadow: 0 0 10px rgba(76, 175, 80, 0.3);
}

.location-inputs {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
    margin-bottom: 20px;
}

.location-group {
    background: rgba(51, 51, 51, 0.8);
    padding: 15px;
    border-radius: 8px;
}

.location-group h4 {
    color: #4CAF50;
    margin-bottom: 10px;
}

.location-group input {
    width: 100%;
    padding: 8px;
    margin-bottom: 10px;
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(76, 175, 80, 0.3);
    border-radius: 4px;
    color: #fff;
}

.chart-container {
    height: 400px;
    background: rgba(51, 51, 51, 0.8);
    border-radius: 12px;
    padding: 20px;
    margin-top: 20px;
}

.main-puzzle-info {
    background: linear-gradient(145deg, #4CAF50, #45a049);
    padding: 15px;
    border-radius: 8px;
    margin-bottom: 15px;
    font-weight: bold;
}
/* Main Layout Container */
.main-container {
    display: grid;
    grid-template-columns: 300px 1fr; /* 300px ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏ï‡∏¥‡∏Å‡∏≤, ‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Å‡∏° */
    gap: 20px;
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
}

/* Game Rules Panel Styles */
.game-rules {
    background: linear-gradient(145deg, #2c2c2c, #333333);
    padding: 25px;
    border-radius: 15px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
    height: fit-content;
    position: sticky;
    top: 20px; /* ‡πÉ‡∏´‡πâ‡∏Å‡∏ï‡∏¥‡∏Å‡∏≤‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏ï‡∏≤‡∏°‡∏Å‡∏≤‡∏£ scroll */
}

.game-rules h2 {
    color: #4CAF50;
    font-size: 1.5em;
    margin-bottom: 20px;
    text-align: center;
    text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.2);
}

.game-rules ul {
    list-style-type: none;
    padding: 0;
    margin: 0;
}

.game-rules li {
    position: relative;
    padding: 12px 0 12px 30px;
    color: #ffffff;
    font-size: 1.1em;
    line-height: 1.5;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.game-rules li:last-child {
    border-bottom: none;
}

.game-rules li:before {
    content: "‚Ä¢";
    color: #4CAF50;
    font-size: 1.5em;
    position: absolute;
    left: 10px;
    top: 8px;
}

/* Existing Game Container Styles - ‡∏õ‡∏£‡∏±‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î‡πÉ‡∏´‡πâ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡∏Å‡∏±‡∏ö layout ‡πÉ‡∏´‡∏°‡πà */
.game-container {
    max-width: none; /* ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å max-width ‡πÄ‡∏î‡∏¥‡∏° */
    margin: 0;
    background: linear-gradient(145deg, #1a1a1a, #2a2a2a);
    border-radius: 15px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    color: #ffffff;
}

/* ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á Input Styles */
.puzzle-input {
    width: calc(100% - 24px);
    padding: 12px;
    border: 2px solid rgba(76, 175, 80, 0.3);
    background: rgba(255, 255, 255, 0.1);
    border-radius: 8px;
    color: #fff;
    font-size: 1.1em;
    margin-bottom: 15px;
    box-sizing: border-box;
}

/* Responsive Design */
@media (max-width: 1024px) {
    .main-container {
        grid-template-columns: 250px 1fr; /* ‡∏•‡∏î‡∏Ç‡∏ô‡∏≤‡∏î‡∏Å‡∏ï‡∏¥‡∏Å‡∏≤‡∏•‡∏á‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢‡∏ö‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏Ç‡∏ô‡∏≤‡∏î‡∏Å‡∏•‡∏≤‡∏á */
        gap: 15px;
        padding: 15px;
    }
}

@media (max-width: 768px) {
    .main-container {
        grid-template-columns: 1fr; /* ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ ‡πÉ‡∏´‡πâ‡∏Å‡∏ï‡∏¥‡∏Å‡∏≤‡∏≠‡∏¢‡∏π‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô */
    }
    
    .game-rules {
        position: static; /* ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å sticky ‡∏ö‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ */
    }
    
    .game-rules h2 {
        font-size: 1.3em;
    }
    
    .game-rules li {
        font-size: 1em;
        padding: 10px 0 10px 25px;
    }
}
</style>
<body>
<div class="main-container">
    <!-- Game Rules Panel -->
    <div class="game-rules">
        <h2>‡∏Å‡∏ï‡∏¥‡∏Å‡∏≤/‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô</h2>
        <ul>
            <!-- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏ï‡∏¥‡∏Å‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ -->
            <li>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô</li>
            <li>‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏Å‡πâ‡∏õ‡∏£‡∏¥‡∏®‡∏ô‡∏≤‡∏¢‡πà‡∏≠‡∏¢ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÑ‡∏î‡πâ üîç ‡πÅ‡∏•‡∏∞ üí´ ‡∏°‡∏≤‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°</li>
            <li>‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏Ç‡∏≠‡∏á üîç ‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏õ‡∏£‡∏¥‡∏®‡∏ô‡∏≤‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏î‡πà‡∏≤‡∏ô</li>
            <li>‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏Ç‡∏≠‡∏á üí´ ‡∏Ñ‡∏∑‡∏≠‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÅ‡∏•‡∏∞‡πÅ‡∏•‡∏∞‡∏à‡∏î‡∏à‡∏≥‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏á‡πÉ‡∏ô‡∏ä‡πà‡∏≠‡∏á ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥</li>
            <!-- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏ï‡∏¥‡∏Å‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡∏ï‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ -->
        </ul>
    </div>
    <!-- Game Container -->
    <div class="game-container">
        <h1>‡∏ä‡∏≤‡∏ß‡∏ö‡πâ‡∏≤‡∏ô‡∏´‡∏≤‡∏¢‡πÑ‡∏õ‡πÑ‡∏´‡∏ô?</h1>

        <!-- Progress Indicator -->
        <div class="progress-bar">
            <div class="progress-step clickable" data-level="1">‡∏î‡πà‡∏≤‡∏ô 1</div>
            <div class="progress-step clickable" data-level="2">‡∏î‡πà‡∏≤‡∏ô 2</div>
            <div class="progress-step clickable" data-level="3">‡∏î‡πà‡∏≤‡∏ô 3</div>
            <div class="progress-step clickable" data-level="4">‡∏î‡πà‡∏≤‡∏ô 4</div>
            <div class="progress-step special clickable" data-level="stats">‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥</div>
        </div>


        <!-- Level 1 -->
        <div id="level1" class="level active">
            <h2>‡∏î‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà 1: ‡πÅ‡∏Å‡πâ‡πÉ‡∏´‡πâ‡πÑ‡∏î‡πâ‡∏ñ‡πâ‡∏≤‡∏ô‡∏≤‡∏¢‡πÅ‡∏ô‡πà‡∏à‡∏£‡∏¥‡∏á</h2>
            <div class="sub-puzzles">
                <div class="sub-puzzle" id="key1">
                    <h3>‡∏õ‡∏£‡∏¥‡∏®‡∏ô‡∏≤‡∏ó‡∏µ‡πà‡∏¢‡πà‡∏≠‡∏¢‡∏ó‡∏µ‡πà1:</h3>
                    <p class="puzzle-text">2 + _ = ‚àö25 - ‚àö4</p>
                    <input type="number" class="puzzle-input" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏Å‡∏∏‡∏ç‡πÅ‡∏à">
                    <button class="submit-btn" onclick="checkSubPuzzle('key1', 1)">‡∏•‡∏≠‡∏á‡∏£‡∏´‡∏±‡∏™</button>
                </div>
                <div class="sub-puzzle" id="corner1">
                    <h3>‡∏õ‡∏£‡∏¥‡∏®‡∏ô‡∏≤‡∏¢‡πà‡∏≠‡∏¢‡∏ó‡∏µ‡πà2:</h3>
                    <p class="puzzle-text">-2x - 8 = -x + 2 </p>
                    <input type="number" class="puzzle-input" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ó‡∏µ‡πà‡∏°‡∏∏‡∏°‡∏´‡πâ‡∏≠‡∏á">
                    <button class="submit-btn" onclick="checkSubPuzzle('corner1', 1)">‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö</button>
                </div>
            </div>
            <div class="main-puzzle" id="mainPuzzle1">
                <h3>‡∏õ‡∏£‡∏¥‡∏®‡∏ô‡∏≤‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢</h3>
                <p class="puzzle-text">10V I V 2I </p>
                <input type="number" class="puzzle-input" id="mainAnswer1">
                <button class="submit-btn" onclick="checkMainAnswer(1)">‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö</button>
            </div>
        </div>

        <!-- Level 2 -->
        <div id="level2" class="level">
            <h2>‡∏î‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà 2: ‡πÄ‡∏Å‡πà‡∏á‡∏à‡∏£‡∏¥‡∏á‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï‡∏∏</h2>
            <div class="sub-puzzles">
                <div class="sub-puzzle" id="key2">
                    <h3>‡∏õ‡∏£‡∏¥‡∏®‡∏ô‡∏≤‡∏¢‡πà‡∏≠‡∏¢‡∏ó‡∏µ‡πà1:</h3>
                    <p class="puzzle-text">Sept Aug Apr Feb</p>
                    <input type="number" class="puzzle-input" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏Å‡∏∏‡∏ç‡πÅ‡∏à">
                    <button class="submit-btn" onclick="checkSubPuzzle('key2', 2)">‡∏•‡∏≠‡∏á‡∏£‡∏´‡∏±‡∏™</button>
                </div>
                <div class="sub-puzzle" id="corner2">
                    <h3>‡∏õ‡∏£‡∏¥‡∏®‡∏ô‡∏≤‡∏¢‡πà‡∏≠‡∏¢‡∏ó‡∏µ‡πà2:</h3>
                    <p class="puzzle-text">‚¨¢ ‚ñ† ‚óè ‚ó¢</p>
                    <input type="number" class="puzzle-input" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ó‡∏µ‡πà‡∏°‡∏∏‡∏°‡∏´‡πâ‡∏≠‡∏á">
                    <button class="submit-btn" onclick="checkSubPuzzle('corner2', 2)">‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö</button>
                </div>
            </div>
            <div class="main-puzzle" id="mainPuzzle2">
                <h3>‡∏õ‡∏£‡∏¥‡∏®‡∏ô‡∏≤‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢</h3>
                <p class="puzzle-text">‚†Å‚†ë‚†É‚†ö‚†ô‚†É</p>
                <input type="number" class="puzzle-input" id="mainAnswer2">
                <button class="submit-btn" onclick="checkMainAnswer(2)">‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö</button>
            </div>
        </div>

        <!-- Level 3 -->
        <div id="level3" class="level">
            <h2>‡∏î‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà 3: ‡∏™‡∏°‡∏Å‡∏≤‡∏£‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡πÉ‡∏´‡∏°‡πà</h2>
            <div class="sub-puzzles">
                <div class="sub-puzzle" id="key3">
                    <h3>‡∏õ‡∏£‡∏¥‡∏®‡∏ô‡∏≤‡∏¢‡πà‡∏≠‡∏¢‡∏ó‡∏µ‡πà1:</h3>
                    <p class="puzzle-text">üåû+üåû+üåû=15</p> <!-- üåû = 5 -->
                    <p class="puzzle-text">(üåûxüçì)+üçì=36</p> <!-- üçì = 6 -->
                    <p class="puzzle-text">(üçì√∑‚≠ê)+üåû=7</p> <!-- ‚≠ê = 3 -->
                    <p class="puzzle-text">‚≠ê+üåû+üçì= ?</p>
                    <input type="number" class="puzzle-input" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏Å‡∏∏‡∏ç‡πÅ‡∏à">
                    <button class="submit-btn" onclick="checkSubPuzzle('key3', 3)">‡∏•‡∏≠‡∏á‡∏£‡∏´‡∏±‡∏™</button>
                </div>
                <div class="sub-puzzle" id="corner3">
                    <h3>‡∏õ‡∏£‡∏¥‡∏®‡∏ô‡∏≤‡∏¢‡πà‡∏≠‡∏¢‡∏ó‡∏µ‡πà2:</h3>
                    <p class="puzzle-text">8,2 = 26</p>
                    <p class="puzzle-text">5,2 = 17</p>
                    <p class="puzzle-text">8,0 = 8</p>
                    <p class="puzzle-text">12,24 = ?</p>
                    <input type="number" class="puzzle-input" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ó‡∏µ‡πà‡∏°‡∏∏‡∏°‡∏´‡πâ‡∏≠‡∏á">
                    <button class="submit-btn" onclick="checkSubPuzzle('corner3', 3)">‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö</button>
                </div>
            </div>
            <div class="main-puzzle" id="mainPuzzle3">
                <h3>‡∏õ‡∏£‡∏¥‡∏®‡∏ô‡∏≤‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢</h3>
                <p class="puzzle-text">12 = 50</p>
                <p class="puzzle-text">4 = 18</p>
                <p class="puzzle-text">25 = 102</p>
                <p class="puzzle-text">1 = ?</p>
                <input type="number" class="puzzle-input" id="mainAnswer3">
                <button class="submit-btn" onclick="checkMainAnswer(3)">‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö</button>
            </div>
        </div>

        <!-- Level 4 -->
        <div id="level4" class="level">
            <h2>‡∏î‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà 4: ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏ã‡πà‡∏≠‡∏ô‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô</h2>
            <div class="sub-puzzles">
                <div class="sub-puzzle" id="key4">
                    <h3>‡∏õ‡∏£‡∏¥‡∏®‡∏ô‡∏≤‡∏¢‡πà‡∏≠‡∏¢‡∏ó‡∏µ‡πà1:</h3>
                    <p class="puzzle-text">2 _ 5 _ 11 _ 17 </p>
                    <input type="number" class="puzzle-input" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏Å‡∏∏‡∏ç‡πÅ‡∏à">
                    <button class="submit-btn" onclick="checkSubPuzzle('key4', 4)">‡∏•‡∏≠‡∏á‡∏£‡∏´‡∏±‡∏™</button>
                </div>
                <div class="sub-puzzle" id="corner4">
                    <h3>‡∏õ‡∏£‡∏¥‡∏®‡∏ô‡∏≤‡∏¢‡πà‡∏≠‡∏¢‡∏ó‡∏µ‡πà2:</h3>
                    <p class="puzzle-text">a = 1, z = 26</p>
                    <p class="puzzle-text">e,a,s,y = ?</p>
                    <input type="number" class="puzzle-input" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ó‡∏µ‡πà‡∏°‡∏∏‡∏°‡∏´‡πâ‡∏≠‡∏á">
                    <button class="submit-btn" onclick="checkSubPuzzle('corner4', 4)">‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö</button>
                </div>
            </div>
            <div class="main-puzzle" id="mainPuzzle4">
                <h3>‡∏õ‡∏£‡∏¥‡∏®‡∏ô‡∏≤‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢</h3>
                <p class="puzzle-text">6.2831_ _ _</p>
                <input type="number" class="puzzle-input" id="mainAnswer4">
                <button class="submit-btn" onclick="checkMainAnswer(4)">‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö</button>
            </div>
        </div>
        <div id="statsLevel" class="level">
            <h2>‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥</h2>
            <div class="stats-section">
                <h3>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÅ‡∏ú‡∏ô‡∏†‡∏π‡∏°‡∏¥:</h3>
                <select id="chartType" class="chart-select">
                    <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÅ‡∏ú‡∏ô‡∏†‡∏π‡∏°‡∏¥ --</option>
                    <option value="bar">‡πÅ‡∏ú‡∏ô‡∏†‡∏π‡∏°‡∏¥‡πÅ‡∏ó‡πà‡∏á</option>
                    <option value="line">‡πÅ‡∏ú‡∏ô‡∏†‡∏π‡∏°‡∏¥‡πÄ‡∏™‡πâ‡∏ô</option>
                    <option value="candlestick">‡πÅ‡∏ú‡∏ô‡∏†‡∏π‡∏°‡∏¥‡∏ß‡∏á‡∏Å‡∏•‡∏°</option>
                </select>

                <div class="data-input-section">
                    <h3>‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏≤‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà:</h3>
                    <div class="location-inputs">
                        <div class="location-group">
                            <h4>‡∏ï‡πà‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®</h4>
                            <input type="number" id="abroadMale" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡∏ä‡∏≤‡∏¢">
                            <input type="number" id="abroadFemale" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡∏´‡∏ç‡∏¥‡∏á">
                        </div>
                        <div class="location-group">
                            <h4>‡∏ß‡∏±‡∏î</h4>
                            <input type="number" id="templeMale" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡∏ä‡∏≤‡∏¢">
                            <input type="number" id="templeFemale" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡∏´‡∏ç‡∏¥‡∏á">
                        </div>
                        <div class="location-group">
                            <h4>‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û</h4>
                            <input type="number" id="bangkokMale" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡∏ä‡∏≤‡∏¢">
                            <input type="number" id="bangkokFemale" placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡∏´‡∏ç‡∏¥‡∏á">
                        </div>
                    </div>
                    <button id="submitStats" class="submit-btn">‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
                </div>
            </div>
            <div id="chartContainer" class="chart-container"></div>
        </div>

        <!-- Modified Results Display -->
        <div id="discoveredInfo" class="discovered-info">
            <h3>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏Ñ‡πâ‡∏ô‡∏û‡∏ö:</h3>
            <div id="mainPuzzleInfo" class="main-puzzle-info"></div>
            <ul id="infoList"></ul>
        </div>
    </div>
</div>
<script>

const gameData = {
    currentLevel: 1,
    discoveredInfo: [],
    subPuzzles: {
        level1: { key1: false, corner1: false },
        level2: { key2: false, corner2: false },
        level3: { key3: false, corner3: false },
        level4: { key4: false, corner4: false }
    }
};

// Puzzle Data
const levelClues = {
    1: {
        key1: {
            puzzle: "2 + _ = ‚àö25 - ‚àö4",
            answer: 1,
            reward: "‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£"
        },
        corner1: {
            puzzle: "-2x - 8 = -x + 2",
            answer: -10,
            reward: "‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡πÉ‡∏ô‡∏™‡∏°‡∏±‡∏¢‡πÇ‡∏ö‡∏£‡∏≤‡∏ì"
        },
        hidden: {
            type: "sequence",
            pattern: [1, 5, 2, 5, 0],
            hint: "MDCCL ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡πÇ‡∏£‡∏°‡∏±‡∏ô"
        }
    },
    2: {
        key2: {
            puzzle: "Sept Aug Apr Frb",
            answer: 9842,
            reward: "‡∏≠‡∏±‡∏Å‡∏©‡∏£‡∏ô‡∏µ‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡∏û‡∏¥‡∏Å‡∏≤‡∏£‡∏î‡πâ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏°‡∏≠‡∏á‡πÄ‡∏´‡πá‡∏ô"
        },
        corner2: {
            puzzle: "‚¨¢ ‚ñ† ‚óè ‚ó¢",
            answer: 6403,
            reward: "‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏à‡∏∏‡∏î ‡πÅ‡∏ï‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏±‡∏Å‡∏©‡∏£‡∏û‡∏¥‡πÄ‡∏®‡∏©"
        }
    },
    3: {
        key3: {
            puzzle: "‚≠ê+üåû+üçì= ?",
            answer: 14,
            reward: "‡∏Ñ‡∏π‡∏ì‡∏Å‡πà‡∏≠‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏≠‡∏¢‡∏ö‡∏ß‡∏Å"
        },
        corner3: {
            puzzle: "12,24 = ?",
            answer: 324,
            reward: "‡∏à‡∏≥‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏ö‡∏ß‡∏Å2‡∏£‡∏∂‡πÄ‡∏õ‡∏•‡πà‡∏≤"
        }
    },
    4: {
        key4: {
            puzzle: "2 _ 5 _ 11 _ ",
            answer: 3713,
            reward: "‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏á‡∏ó‡∏µ‡πà‡∏Ç‡∏≠‡∏á‡∏ß‡∏á‡∏Å‡∏•‡∏°"
        },
        corner4: {
            puzzle: "e,a,s,y = ?",
            answer: 511925,
            reward: "x+3=5"
        }
    }
};

// Hidden Data
const hiddenData = {
    locations: {
        abroad: {
            male: 8,
            female: 6,
            clue: "‡∏ï‡πà‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏® = 14 ‡∏Ñ‡∏ô"
        },
        bangkok: {
            male: 15,
            female: 5,
            clue: "‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û = 20 ‡∏Ñ‡∏ô "
        },
        temple: {
            male: 12,
            female: 24,
            clue: "‡∏ß‡∏±‡∏î = 36 ‡∏Ñ‡∏ô"
        }
    }
};

// Check Sub Puzzle
function checkSubPuzzle(puzzleId, level) {
    const input = document.querySelector(`#${puzzleId} input`);
    const puzzle = document.getElementById(puzzleId);
    const correctAnswer = levelClues[level][puzzleId].answer;
    
    if (parseInt(input.value) === correctAnswer) {
        puzzle.classList.add('solved');
        gameData.subPuzzles[`level${level}`][puzzleId] = true;
        collectClue(level, puzzleId);
        checkAllSubPuzzles(level);
        
        // Add success animation
        const animation = document.createElement('div');
        animation.className = 'success-animation';
        animation.textContent = 'üîç';
        puzzle.appendChild(animation);
        
        // Disable input and button
        input.disabled = true;
        puzzle.querySelector('button').disabled = true;
    } else {
        puzzle.classList.add('error');
        setTimeout(() => puzzle.classList.remove('error'), 1000);
    }
}

// Collect Clue
function collectClue(level, puzzleId) {
    const clue = levelClues[level][puzzleId];
    if (clue) {
        gameData.discoveredInfo.push({
            type: 'clue',
            level: level,
            content: clue.reward,
            timestamp: new Date().getTime()
        });
    }
    
    // Add hidden info (30% chance)
    if (Math.random() > 0) {
        const locations = Object.keys(hiddenData.locations);
        const randomLocation = locations[Math.floor(Math.random() * locations.length)];
        gameData.discoveredInfo.push({
            type: 'hidden',
            content: hiddenData.locations[randomLocation].clue,
            timestamp: new Date().getTime()
        });
    }
    
    updateDiscoveredInfo();
}

// Update Discovered Info
function updateDiscoveredInfo() {
    const infoList = document.getElementById('infoList');
    const sortedInfo = gameData.discoveredInfo.sort((a, b) => b.timestamp - a.timestamp);
    
    infoList.innerHTML = sortedInfo.map(info => {
        const displayClass = info.type === 'clue' ? 'clue-info' : 'hidden-info';
        const icon = info.type === 'clue' ? 'üîç' : 'üí´';
        
        return `
            <li class="${displayClass}">
                ${icon} ${info.content}
                ${info.type === 'clue' ? `<small>(‡∏î‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà ${info.level})</small>` : ''}
            </li>
        `;
    }).join('');
}

// Check All Sub Puzzles
function checkAllSubPuzzles(level) {
    const levelPuzzles = gameData.subPuzzles[`level${level}`];
    const allSolved = Object.values(levelPuzzles).every(solved => solved);
    
    if (allSolved) {
        const mainPuzzle = document.getElementById(`mainPuzzle${level}`);
        mainPuzzle.style.display = 'block';
        
        // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏Ñ‡πâ‡∏ô‡∏û‡∏ö
        gameData.discoveredInfo.push({
            type: 'hidden',
            content: `‡πÄ‡∏õ‡∏¥‡∏î‡∏õ‡∏£‡∏¥‡∏®‡∏ô‡∏≤‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡∏î‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà ${level} ‡πÅ‡∏•‡πâ‡∏ß! üîì`,
            timestamp: new Date().getTime()
        });
        updateDiscoveredInfo();
        
        // ‡∏ó‡∏≥‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏´‡∏°‡∏≤‡∏¢ Progress Step
        document.querySelector(`.progress-step[data-level="${level}"]`).classList.add('completed');
        if (level < 4) {
            document.querySelector(`.progress-step[data-level="${level + 1}"]`).classList.add('active');
        }
    }
}


function showFinalAnalysis() {
    const gameContainer = document.querySelector('.game-container');
    const totalTime = Math.floor((new Date().getTime() - gameData.startTime) / 1000); // ‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÄ‡∏õ‡πá‡∏ô‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
    const hours = Math.floor(totalTime / 3600);
    const minutes = Math.floor((totalTime % 3600) / 60);
    const seconds = totalTime % 60;

    // ‡∏™‡∏£‡πâ‡∏≤‡∏á timeline ‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
    const timeline = gameData.discoveredInfo
        .map(info => {
            const time = new Date(info.timestamp).toLocaleTimeString();
            return `<li class="timeline-item ${info.type}">
                <span class="time">${time}</span>
                <span class="content">${info.content}</span>
            </li>`;
        })
        .join('');

    gameContainer.innerHTML = `
        <div class="final-analysis">
            <h2>üéä ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢! ‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡πÑ‡∏Ç‡∏õ‡∏£‡∏¥‡∏®‡∏ô‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÅ‡∏•‡πâ‡∏ß! üéä</h2>
            
            <div class="analysis-section">
                <h3>üìä ‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô</h3>
                <ul>
                    <li>‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ: ${hours}‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á ${minutes}‡∏ô‡∏≤‡∏ó‡∏µ ${seconds}‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ</li>
                    <li>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏≥‡πÉ‡∏ö‡πâ‡∏ó‡∏µ‡πà‡∏Ñ‡πâ‡∏ô‡∏û‡∏ö: ${gameData.discoveredInfo.filter(info => info.type === 'clue').length} ‡∏ä‡∏¥‡πâ‡∏ô</li>
                    <li>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ã‡πà‡∏≠‡∏ô‡πÄ‡∏£‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏û‡∏ö: ${gameData.discoveredInfo.filter(info => info.type === 'hidden').length} ‡∏ä‡∏¥‡πâ‡∏ô</li>
                </ul>
            </div>

            <div class="analysis-section">
                <h3>üîç ‡∏ö‡∏ó‡∏™‡∏£‡∏∏‡∏õ‡∏õ‡∏£‡∏¥‡∏®‡∏ô‡∏≤</h3>
                <ol>
                    <li>‡∏î‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà 1: ‡πÄ‡∏•‡∏Ç‡πÇ‡∏£‡∏°‡∏±‡∏ô MDCCL = 1750</li>
                    <li>‡∏î‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà 2: ‡∏Å‡∏≤‡∏£‡∏£‡∏ß‡∏°‡πÄ‡∏î‡∏∑‡∏≠‡∏ô = 23</li>
                    <li>‡∏î‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà 3: ‡∏Ñ‡πà‡∏≤‡∏Ç‡∏≠‡∏á‡∏î‡∏≤‡∏ß ‚≠ê = 3</li>
                    <li>‡∏î‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà 4: ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ä‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏´‡∏≤‡∏¢‡πÑ‡∏õ = 35 ‡∏Ñ‡∏ô</li>
                </ol>
            </div>

            <div class="analysis-section">
                <h3>‚è≥ Timeline ‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏û‡∏ö</h3>
                <ul class="timeline">
                    ${timeline}
                </ul>
            </div>

            <div class="final-buttons">
                <button onclick="restartGame()" class="restart-btn">‡πÄ‡∏•‡πà‡∏ô‡πÉ‡∏´‡∏°‡πà</button>
                <button onclick="shareResults()" class="share-btn">‡πÅ‡∏ä‡∏£‡πå‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô</button>
            </div>
        </div>
    `;
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏£‡∏µ‡∏™‡∏ï‡∏≤‡∏£‡πå‡∏ó‡πÄ‡∏Å‡∏°
function restartGame() {
    gameData = {
        currentLevel: 1,
        startTime: new Date().getTime(),
        discoveredInfo: [],
        subPuzzles: {
            level1: { puzzle1: false, puzzle2: false },
            level2: { puzzle1: false, puzzle2: false },
            level3: { puzzle1: false, puzzle2: false },
            level4: { puzzle1: false, puzzle2: false }
        }
    };
    
    // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
    const levels = document.querySelectorAll('.level');
    levels.forEach(level => level.classList.remove('active'));
    document.getElementById('level1').classList.add('active');
    
    // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï progress steps
    const steps = document.querySelectorAll('.progress-step');
    steps.forEach(step => {
        step.classList.remove('active', 'completed');
    });
    document.querySelector('.progress-step[data-level="1"]').classList.add('active');
    
    updateDiscoveredInfo();
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏ä‡∏£‡πå‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô
function shareResults() {
    const totalTime = Math.floor((new Date().getTime() - gameData.startTime) / 1000);
    const hours = Math.floor(totalTime / 3600);
    const minutes = Math.floor((totalTime % 3600) / 60);
    const seconds = totalTime % 60;
    
    const shareText = `
üîç ‡∏â‡∏±‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏á‡πÑ‡∏Ç‡∏õ‡∏£‡∏¥‡∏®‡∏ô‡∏≤‡∏ó‡∏±‡πâ‡∏á 4 ‡∏î‡πà‡∏≤‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!
‚è±Ô∏è ‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ: ${hours}‡∏ä‡∏° ${minutes}‡∏ô‡∏≤‡∏ó‡∏µ ${seconds}‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
üèÜ ‡∏Ñ‡πâ‡∏ô‡∏û‡∏ö‡∏Ñ‡∏≥‡πÉ‡∏ö‡πâ: ${gameData.discoveredInfo.filter(info => info.type === 'clue').length} ‡∏ä‡∏¥‡πâ‡∏ô
üéØ ‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏±‡∏ö: ${gameData.discoveredInfo.filter(info => info.type === 'hidden').length} ‡∏ä‡∏¥‡πâ‡∏ô

‡∏°‡∏≤‡∏•‡∏≠‡∏á‡πÄ‡∏•‡πà‡∏ô‡∏Å‡∏±‡∏ô‡πÄ‡∏ñ‡∏≠‡∏∞! #PuzzleGame`;

    // ‡∏™‡∏£‡πâ‡∏≤‡∏á dummy element ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
    const dummy = document.createElement('textarea');
    document.body.appendChild(dummy);
    dummy.value = shareText;
    dummy.select();
    document.execCommand('copy');
    document.body.removeChild(dummy);
    
    alert('‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏Ñ‡∏•‡∏¥‡∏õ‡∏ö‡∏≠‡∏£‡πå‡∏î‡πÅ‡∏•‡πâ‡∏ß! ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÅ‡∏ä‡∏£‡πå‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢ üéâ');
} // a

const chartUtils = {
    colors: {
        male: {
            primary: '#2563eb',
            highlight: '#60a5fa',
            gradient: ['#3b82f6', '#2563eb']
        },
        female: {
            primary: '#db2777',
            highlight: '#f472b6',
            gradient: ['#ec4899', '#db2777']
        },
        background: '#ffffff',
        grid: '#e5e7eb',
        axis: '#1f2937'
    },

    fonts: {
        primary: '14px Inter, system-ui, sans-serif',
        title: 'bold 16px Inter, system-ui, sans-serif',
        legend: '12px Inter, system-ui, sans-serif'
    },

    animation: {
        duration: 1000,
        easing: t => t<.5 ? 4*t*t*t : (t-1)*(2*t-2)*(2*t-2)+1
    },

    calculateYScale(data) {
        const allValues = data.reduce((acc, item) => {
            acc.push(item.male, item.female);
            return acc;
        }, []);
        const maxValue = Math.max(...allValues);
        return Math.ceil(maxValue / 5) * 5;
    },

    drawGrid(ctx, width, height, steps) {
        ctx.strokeStyle = this.colors.grid;
        ctx.lineWidth = 0.5;
        ctx.setLineDash([5, 5]);
        
        for (let i = 0; i <= steps; i++) {
            const y = (height / steps) * i + 40;
            ctx.beginPath();
            ctx.moveTo(60, y);
            ctx.lineTo(width - 20, y);
            ctx.stroke();
        }
        
        ctx.setLineDash([]);
    },

    drawAxes(ctx, width, height, maxValue) {
        ctx.strokeStyle = this.colors.axis;
        ctx.lineWidth = 2;
        ctx.font = this.fonts.primary;
        
        // Y axis
        ctx.beginPath();
        ctx.moveTo(60, 40);
        ctx.lineTo(60, height + 40);
        ctx.stroke();

        // X axis
        ctx.beginPath();
        ctx.moveTo(60, height + 40);
        ctx.lineTo(width - 20, height + 40);
        ctx.stroke();

        // Y axis values
        ctx.textAlign = 'right';
        ctx.textBaseline = 'middle';
        ctx.fillStyle = this.colors.axis;
        for (let i = 0; i <= 5; i++) {
            const value = (maxValue / 5) * (5 - i);
            const y = (height / 5) * i + 40;
            ctx.fillText(value.toLocaleString(), 55, y);
        }
    },

    createGradient(ctx, x, y, height, colors) {
        const gradient = ctx.createLinearGradient(x, y, x, y + height);
        gradient.addColorStop(0, colors[0]);
        gradient.addColorStop(1, colors[1]);
        return gradient;
    }
};

const chartDrawers = {
    drawBarChart(ctx, data, width, height) {
        const maxValue = chartUtils.calculateYScale(data);
        const barWidth = Math.min(40, (width - 160) / (data.length * 2));
        let currentAnimation = 0;
        
        const drawingHeight = height - 80;
        const drawingStart = 40;
        
        const animate = () => {
            currentAnimation = Math.min(currentAnimation + 0.05, 1);
            
            // Clear entire canvas
            ctx.fillStyle = chartUtils.colors.background;
            ctx.fillRect(0, 0, width, height);
            
            // Draw grid and axes first
            chartUtils.drawGrid(ctx, width, drawingHeight, 5);
            chartUtils.drawAxes(ctx, width, drawingHeight, maxValue);
            
            // Draw title
            ctx.font = chartUtils.fonts.title;
            ctx.fillStyle = chartUtils.colors.axis;
            ctx.textAlign = 'center';
            ctx.fillText('‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢‡∏ï‡∏±‡∏ß‡∏Ç‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏Å‡∏£‡∏ï‡∏≤‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà', width / 2, 30);
            
            data.forEach((item, index) => {
                const x = 80 + (index * barWidth * 4);
                
                // Draw male bar first
                const maleHeight = (item.male / maxValue) * drawingHeight * 
                    chartUtils.animation.easing(currentAnimation);
                const maleY = drawingHeight - maleHeight + drawingStart;
                    
                ctx.fillStyle = chartUtils.colors.male.primary;
                ctx.beginPath();
                ctx.roundRect(
                    x,
                    maleY,
                    barWidth - 4,
                    maleHeight,
                    4
                );
                ctx.fill();
                
                // Draw female bar
                const femaleHeight = (item.female / maxValue) * drawingHeight * 
                    chartUtils.animation.easing(currentAnimation);
                const femaleY = drawingHeight - femaleHeight + drawingStart;
                    
                ctx.fillStyle = chartUtils.colors.female.primary;
                ctx.beginPath();
                ctx.roundRect(
                    x + barWidth,
                    femaleY,
                    barWidth - 4,
                    femaleHeight,
                    4
                );
                ctx.fill();

                // Add value labels without background
                if (currentAnimation > 0.8) {
                    ctx.font = chartUtils.fonts.primary;
                    ctx.fillStyle = chartUtils.colors.axis;
                    ctx.textAlign = 'center';
                    
                    // Male value
                    const maleLabelY = maleY - 8;
                    ctx.fillStyle = chartUtils.colors.axis;
                    ctx.fillText(
                        item.male.toLocaleString(),
                        x + (barWidth/2) - 2,
                        maleLabelY
                    );
                    
                    // Female value
                    const femaleLabelY = femaleY - 8;
                    ctx.fillStyle = chartUtils.colors.axis;
                    ctx.fillText(
                        item.female.toLocaleString(),
                        x + barWidth + (barWidth/2) - 2,
                        femaleLabelY
                    );
                }

                // Location label
                ctx.font = chartUtils.fonts.primary;
                ctx.fillStyle = chartUtils.colors.axis;
                ctx.textAlign = 'center';
                ctx.fillText(
                    this.formatLocation(item.name),
                    x + barWidth - 2,
                    height - 10
                );
            });

            this.drawLegend(ctx, width);

            if (currentAnimation < 1) {
                requestAnimationFrame(animate);
            }
        };

        animate();
    },

    drawLineChart(ctx, data, width, height) {
        const maxValue = chartUtils.calculateYScale(data);
        const step = (width - 140) / (data.length - 1);
        let currentAnimation = 0;
        
        const animate = () => {
            currentAnimation = Math.min(currentAnimation + 0.05, 1);
            
            ctx.fillStyle = chartUtils.colors.background;
            ctx.fillRect(0, 0, width, height);
            
            const drawingHeight = height - 80;
            const drawingStart = 40;

            // Draw grid and axes first
            chartUtils.drawGrid(ctx, width, drawingHeight, 5);
            chartUtils.drawAxes(ctx, width, drawingHeight, maxValue);
            
            // Draw title
            ctx.font = chartUtils.fonts.title;
            ctx.fillStyle = chartUtils.colors.axis;
            ctx.textAlign = 'center';
            ctx.fillText('‡πÅ‡∏ô‡∏ß‡πÇ‡∏ô‡πâ‡∏°‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢‡∏ï‡∏±‡∏ß‡∏Ç‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏Å‡∏£', width / 2, 30);

            const drawAnimatedLine = (values, color) => {
                // Draw line
                ctx.beginPath();
                ctx.strokeStyle = color;
                ctx.lineWidth = 3;
                ctx.lineJoin = 'round';
                
                values.forEach((value, i) => {
                    const x = 80 + (i * step);
                    const animatedValue = value * chartUtils.animation.easing(currentAnimation);
                    const y = drawingHeight - (animatedValue / maxValue * drawingHeight) + drawingStart;
                    
                    if (i === 0) {
                        ctx.moveTo(x, y);
                    } else {
                        ctx.lineTo(x, y);
                    }
                });
                
                ctx.stroke();

                // Draw points and labels
                values.forEach((value, i) => {
                    const x = 80 + (i * step);
                    const animatedValue = value * chartUtils.animation.easing(currentAnimation);
                    const y = drawingHeight - (animatedValue / maxValue * drawingHeight) + drawingStart;
                    
                    // Draw point
                    ctx.beginPath();
                    ctx.fillStyle = color;
                    ctx.arc(x, y, 6, 0, Math.PI * 2);
                    ctx.fill();

                    // Add value label without background
                    if (currentAnimation > 0.8) {
                        ctx.font = chartUtils.fonts.primary;
                        ctx.fillStyle = chartUtils.colors.axis;
                        ctx.textAlign = 'center';
                        ctx.fillText(value.toLocaleString(), x, y - 15);
                    }
                });
            };

            // Draw male line first, then female line
            drawAnimatedLine(data.map(d => d.male), chartUtils.colors.male.primary);
            drawAnimatedLine(data.map(d => d.female), chartUtils.colors.female.primary);

            // Location labels
            data.forEach((item, i) => {
                const x = 80 + (i * step);
                ctx.font = chartUtils.fonts.primary;
                ctx.fillStyle = chartUtils.colors.axis;
                ctx.textAlign = 'center';
                ctx.fillText(this.formatLocation(item.name), x, height - 10);
            });

            this.drawLegend(ctx, width);

            if (currentAnimation < 1) {
                requestAnimationFrame(animate);
            }
        };

        animate();
    },

    drawLineChart(ctx, data, width, height) {
        const maxValue = chartUtils.calculateYScale(data);
        const step = (width - 140) / (data.length - 1);
        let currentAnimation = 0;
        
        const animate = () => {
            currentAnimation = Math.min(currentAnimation + 0.05, 1);
            
            ctx.fillStyle = chartUtils.colors.background;
            ctx.fillRect(0, 0, width, height);
            
            // Draw title
            ctx.font = chartUtils.fonts.title;
            ctx.fillStyle = chartUtils.colors.axis;
            ctx.textAlign = 'center';
            ctx.fillText('‡πÅ‡∏ô‡∏ß‡πÇ‡∏ô‡πâ‡∏°‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢‡∏ï‡∏±‡∏ß‡∏Ç‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏Å‡∏£', width / 2, 30);

            const drawingHeight = height - 80;
            const drawingStart = 40;

            chartUtils.drawGrid(ctx, width, drawingHeight, 5);
            chartUtils.drawAxes(ctx, width, drawingHeight, maxValue);

            const drawAnimatedLine = (values, color) => {
                // Draw line
                ctx.beginPath();
                ctx.strokeStyle = color;
                ctx.lineWidth = 3;
                ctx.lineJoin = 'round';
                
                values.forEach((value, i) => {
                    const x = 80 + (i * step);
                    const animatedValue = value * chartUtils.animation.easing(currentAnimation);
                    const y = drawingHeight - (animatedValue / maxValue * drawingHeight) + drawingStart;
                    
                    if (i === 0) {
                        ctx.moveTo(x, y);
                    } else {
                        ctx.lineTo(x, y);
                    }
                });
                
                ctx.stroke();

                // Draw points and labels
                values.forEach((value, i) => {
                    const x = 80 + (i * step);
                    const animatedValue = value * chartUtils.animation.easing(currentAnimation);
                    const y = drawingHeight - (animatedValue / maxValue * drawingHeight) + drawingStart;
                    
                    // Draw point
                    ctx.beginPath();
                    ctx.fillStyle = color;
                    ctx.arc(x, y, 6, 0, Math.PI * 2);
                    ctx.fill();

                    // Add value label with background
                    if (currentAnimation > 0.8) {
                        const labelY = y - 15;
                        
                        // Clear background for label
                        ctx.fillStyle = chartUtils.colors.background;
                        ctx.fillRect(x - 20, labelY - 10, 40, 20);
                        
                        // Draw label
                        ctx.font = chartUtils.fonts.primary;
                        ctx.fillStyle = chartUtils.colors.axis;
                        ctx.textAlign = 'center';
                        ctx.fillText(value.toLocaleString(), x, labelY);
                    }
                });
            };

            // Draw male line first, then female line
            drawAnimatedLine(data.map(d => d.male), chartUtils.colors.male.primary);
            drawAnimatedLine(data.map(d => d.female), chartUtils.colors.female.primary);

            // Location labels
            data.forEach((item, i) => {
                const x = 80 + (i * step);
                ctx.font = chartUtils.fonts.primary;
                ctx.fillStyle = chartUtils.colors.axis;
                ctx.textAlign = 'center';
                ctx.fillText(this.formatLocation(item.name), x, height - 10);
            });

            this.drawLegend(ctx, width);

            if (currentAnimation < 1) {
                requestAnimationFrame(animate);
            }
        };

        animate();
    },

    drawLegend(ctx, width) {
        const legends = [
            { label: '‡∏ú‡∏π‡πâ‡∏ä‡∏≤‡∏¢', color: chartUtils.colors.male.primary },
            { label: '‡∏ú‡∏π‡πâ‡∏´‡∏ç‡∏¥‡∏á', color: chartUtils.colors.female.primary }
        ];

        let x = width - 150;
        
        legends.forEach(legend => {
            // Draw colored rectangle
            ctx.fillStyle = legend.color;
            ctx.beginPath();
            ctx.roundRect(x, 10, 22, 12, 3);
            ctx.fill();
            
            // Draw label
            ctx.font = chartUtils.fonts.legend;
            ctx.fillStyle = chartUtils.colors.axis;
            ctx.textAlign = 'left';
            ctx.fillText(legend.label, x + 30, 20);
            
            x += 70;
        });
    },

    formatLocation(name) {
        const locations = {
            'abroad': '‡∏ï‡πà‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®',
            'temple': '‡∏ß‡∏±‡∏î',
            'bangkok': '‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û'
        };
        return locations[name] || name;
    }
};

// Check stats data and draw chart
function checkStatsData() {
    const correctData = {
        abroad: { male: 8, female: 6 },
        temple: { male: 12, female: 24 },
        bangkok: { male: 15, female: 5 }
    };
    
    const chartType = document.getElementById('chartType').value;
    const inputData = {
        abroad: {
            male: parseInt(document.getElementById('abroadMale').value),
            female: parseInt(document.getElementById('abroadFemale').value)
        },
        temple: {
            male: parseInt(document.getElementById('templeMale').value),
            female: parseInt(document.getElementById('templeFemale').value)
        },
        bangkok: {
            male: parseInt(document.getElementById('bangkokMale').value),
            female: parseInt(document.getElementById('bangkokFemale').value)
        }
    };
    
    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
    let isCorrect = true;
    for (let location in correctData) {
        if (inputData[location].male !== correctData[location].male ||
            inputData[location].female !== correctData[location].female) {
            isCorrect = false;
            break;
        }
    }
    
    if (!chartType) {
        alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÅ‡∏ú‡∏ô‡∏†‡∏π‡∏°‡∏¥');
        return;
    }
    
    if (isCorrect) {
        // ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ß‡∏≤‡∏î‡πÅ‡∏ú‡∏ô‡∏†‡∏π‡∏°‡∏¥
        const chartData = Object.keys(inputData).map(location => ({
            name: location,
            male: inputData[location].male,
            female: inputData[location].female,
            total: inputData[location].male + inputData[location].female
        }));
        
        // ‡∏™‡∏£‡πâ‡∏≤‡∏á canvas element
        const container = document.getElementById('chartContainer');
        container.innerHTML = '<canvas id="statsChart" width="800" height="400"></canvas>';
        const canvas = document.getElementById('statsChart');
        const ctx = canvas.getContext('2d');
        
        // ‡∏ß‡∏≤‡∏î‡πÅ‡∏ú‡∏ô‡∏†‡∏π‡∏°‡∏¥‡∏ï‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
        if (chartType === 'bar') {
            chartDrawers.drawBarChart(ctx, chartData, 800, 350);
        } else if (chartType === 'line') {
            chartDrawers.drawLineChart(ctx, chartData, 800, 350);
        } else if (chartType === 'candlestick') {
            chartDrawers.drawBarChart(ctx, chartData, 800, 350);
        }
        
        alert('‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢! ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î');
    } else {
        alert('‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á');
    }
}

// ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏î‡πà‡∏≤‡∏ô‡πÉ‡∏ô‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö Object
const levelsData = {
    1: { 
        answer: 50152, //‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏à‡∏£‡∏¥‡∏á
        hint: '‡πÑ‡∏ü'      // ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏≥‡πÉ‡∏ö‡πâ
    },
    2: { 
        answer: 152042, 
        hint: '' 
    },
    3: { 
        answer: 6, 
        hint: '' 
    },
    4: { 
        answer: 853, 
        hint: '' 
    }
};

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≥‡πÉ‡∏ö‡πâ‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏î‡πà‡∏≤‡∏ô
function setLevelData(level, answer, hint) {
    if (level >= 1 && level <= 4) {
        levelsData[level] = { 
            answer: parseInt(answer), 
            hint: hint 
        };
    } else {
        console.error('‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏î‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á');
    }
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏≥‡πÉ‡∏ö‡πâ‡πÉ‡∏ô‡∏î‡πà‡∏≤‡∏ô
function showHint(level) {
    const hintContainer = document.getElementById(`hintContainer${level}`);
    if (hintContainer && levelsData[level].hint) {
        hintContainer.textContent = levelsData[level].hint;
    } else {
        console.error(`‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏≥‡πÉ‡∏ö‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏î‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà ${level}`);
    }
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö
// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö
function checkMainAnswer(level) {
    const answer = document.getElementById(`mainAnswer${level}`).value;
    const mainPuzzle = document.getElementById(`mainPuzzle${level}`);
    
    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏Ç‡∏≠‡∏á‡∏î‡πà‡∏≤‡∏ô‡∏ô‡∏µ‡πâ‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
    if (!levelsData[level].answer) {
        console.error(`‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏î‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà ${level}`);
        return;
    }
    
    if (parseInt(answer) === levelsData[level].answer) {
        // ‡πÅ‡∏™‡∏î‡∏á‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏ä‡∏±‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡∏≠‡∏ö‡∏ñ‡∏π‡∏Å
        mainPuzzle.innerHTML += '<div class="success-animation">üéâ</div>';
        
        // ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö (‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÉ‡∏´‡πâ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Ñ‡∏≥‡πÉ‡∏ö‡πâ ‡∏´‡∏£‡∏∑‡∏≠‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£)
        gameData.discoveredInfo.push({
            type: 'main',
            level: level,
            content: `‡∏Ñ‡∏∏‡∏ì‡∏ú‡πà‡∏≤‡∏ô‡∏î‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà ${level} ‡πÅ‡∏•‡πâ‡∏ß! ‡∏Ñ‡∏≥‡πÉ‡∏ö‡πâ: ${levelsData[level].hint}`,
            timestamp: new Date().getTime()
        });
        updateDiscoveredInfo();
        
        // ‡∏ó‡∏≥‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏´‡∏°‡∏≤‡∏¢‡∏ß‡πà‡∏≤‡∏î‡πà‡∏≤‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß
        document.querySelector(`.progress-step[data-level="${level}"]`).classList.add('completed');
        
        // ‡πÄ‡∏õ‡∏¥‡∏î‡∏î‡πà‡∏≤‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
        if (level < 4) {
            setTimeout(() => {
                document.getElementById(`level${level}`).classList.remove('active');
                document.getElementById(`level${level + 1}`).classList.add('active');
                document.querySelector(`.progress-step[data-level="${level + 1}"]`).classList.add('active');
            }, 1000);
        } else {
            // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÑ‡∏õ‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤ stats
            setTimeout(() => {
                document.getElementById(`level${level}`).classList.remove('active');
                document.getElementById('statsLevel').classList.add('active');
                document.querySelector(`.progress-step[data-level="stats"]`).classList.add('active');
            }, 1000);
        }
    } else {
        mainPuzzle.classList.add('error');
        setTimeout(() => mainPuzzle.classList.remove('error'), 1000);
    }
}


// ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≥‡πÉ‡∏ö‡πâ
setLevelData(1, 50152, '‡∏ï‡πà‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡∏°‡∏µ‡∏ú‡∏π‡πâ‡∏ä‡∏≤‡∏¢‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î 57%');
setLevelData(2, 152042, '‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏°‡∏µ‡∏ú‡∏π‡πâ‡∏ä‡∏≤‡∏¢‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î 75%');
setLevelData(3, 6, '‡∏ß‡∏±‡∏î‡∏°‡∏µ‡∏ú‡∏π‡πâ‡∏ä‡∏≤‡∏¢‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î 33%');
setLevelData(4, 853, '‡πÅ‡∏ú‡∏ô‡∏†‡∏π‡∏°‡∏¥‡πÅ‡∏ó‡πà‡∏á');


// ‡πÄ‡∏û‡∏¥‡πà‡∏° event listener ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏°‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
document.getElementById('submitStats').addEventListener('click', checkStatsData);

function updateMainPuzzleInfo(level) {
    const mainPuzzleInfo = document.getElementById('mainPuzzleInfo');
    let infoText = '';
    
    switch(level) {
        case 1:
            infoText = 'üåü ‡∏ú‡∏π‡πâ‡∏ä‡∏≤‡∏¢‡πÑ‡∏õ‡∏ï‡πà‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏® 8 ‡∏Ñ‡∏ô ‡πÅ‡∏•‡∏∞‡∏ú‡∏π‡πâ‡∏´‡∏ç‡∏¥‡∏á‡πÑ‡∏õ‡∏ï‡πà‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏® 6 ‡∏Ñ‡∏ô';
            break;
        case 2:
            infoText = 'üåü ‡∏ú‡∏π‡πâ‡∏ä‡∏≤‡∏¢‡πÑ‡∏õ‡∏ß‡∏±‡∏î 12 ‡∏Ñ‡∏ô ‡πÅ‡∏•‡∏∞‡∏ú‡∏π‡πâ‡∏´‡∏ç‡∏¥‡∏á‡πÑ‡∏õ‡∏ß‡∏±‡∏î 24 ‡∏Ñ‡∏ô';
            break;
        case 3:
            infoText = 'üåü ‡∏ú‡∏π‡πâ‡∏ä‡∏≤‡∏¢‡πÑ‡∏õ‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û 15 ‡∏Ñ‡∏ô ‡πÅ‡∏•‡∏∞‡∏ú‡∏π‡πâ‡∏´‡∏ç‡∏¥‡∏á‡πÑ‡∏õ‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û 5 ‡∏Ñ‡∏ô';
            break;
        case 4:
            infoText = 'üåü ‡∏Ñ‡∏≥‡πÉ‡∏ö‡πâ: ‡πÅ‡∏ú‡∏ô‡∏†‡∏π‡∏°‡∏¥‡πÅ‡∏ó‡πà‡∏á‡πÄ‡∏ó‡∏µ‡∏¢‡∏ô‡∏à‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡πÑ‡∏Ç‡∏õ‡∏£‡∏¥‡∏®‡∏ô‡∏≤';
            break;
    }
    
    if (infoText) {
        mainPuzzleInfo.innerHTML = infoText;
        mainPuzzleInfo.style.display = 'block';
    }
}

document.querySelectorAll('.progress-step.clickable').forEach(step => {
    step.addEventListener('click', () => {
        const level = step.getAttribute('data-level');
        
        // Hide all levels
        document.querySelectorAll('.level').forEach(l => l.classList.remove('active'));
        
        if (level === 'stats') {
            document.getElementById('statsLevel').classList.add('active');
        } else {
            document.getElementById(`level${level}`).classList.add('active');
        }
    });
});


// Initialize Game
document.addEventListener('DOMContentLoaded', () => {
    // Set first level as active
    document.getElementById('level1').classList.add('active');
});
</script>
</body>
</html>